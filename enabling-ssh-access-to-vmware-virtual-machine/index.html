<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://awolski.com/style.css><title>Enabling ssh access to VMWare virtual machine | Tony Wolski</title><meta name=description content="Tony Wolski: I&rsquo;m in the process of creating a Vagrant box for a VMWare VM for a machine I&rsquo;m working on, the end goal being fully automated development â€¦"><meta name=author content="Tony Wolski"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=referrer content="no-referrer"><meta name=generator content="Hugo 0.80.0"><link rel=canonical href=https://awolski.com/enabling-ssh-access-to-vmware-virtual-machine/></head><body><section id=masthead><h1><a href=/ title="Tony Wolski">Tony Wolski</a></h1><nav><ul><li><a href=/contact title=Contact>Contact</a></li></ul></nav></section><div id=content><article class=post><header><h1>Enabling ssh access to VMWare virtual machine</h1><small>2015-07-22</small></header><p>I&rsquo;m in the process of creating a Vagrant box for a VMWare VM for a machine I&rsquo;m working on, the end goal being fully automated development environment built so that new developers can get up and running quick-smart.</p><p>To start with, I need a Vagrant Base Box I can use as the foundation of the development environment. There is a set minimum requirements for VMWare base boxes, as indicated by Vagrant&rsquo;s documentation:</p><blockquote><p>Base boxes for VMware should have the following software installed, as a bare minimum:</p><ul><li>SSH server with key-based authentication setup. If you want the box to work with default Vagrant settings, the SSH user must be set to accept the insecure keypair that ships with Vagrant.</li><li>VMware Tools so that things such as shared folders can function. There are many other benefits to installing the tools, such as improved networking performance.</li></ul></blockquote><p>The VMWare Tools bit was easy, but this was the first time I&rsquo;d attempted setting up a VM to allow ssh access, so I thought I&rsquo;d document the process.</p><p>First I created a new VM using CentOS 6.6 iso and made sure all the packages were up to date by running <code>yum update</code> and re-installing VMWare Tools.</p><p>CentOS already has an openssh-server installed, so all you have to do is add Vagrant&rsquo;s insecure public key to the <code>~/.ssh/authorized_keys</code>. To do this, open your browser and copy the text in <a href=https://github.com/mitchellh/vagrant/blob/master/keys/vagrant.pub,>https://github.com/mitchellh/vagrant/blob/master/keys/vagrant.pub,</a> and add it to <code>~/.ssh/authorized_keys</code>.</p><p><img src=/assets/img/2015-07-22-vagrant-public-ssh-key.png alt="Vagrant insecure ssh public key"></p><p>To test an SSH connection from your host to the guest VM, locate the IP address of the guest. Running <code>ifconfig</code> will give you:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#f92672>[</span>user@localhost ~<span style=color:#f92672>]</span>$ ifconfig
eth0      Link encap:Ethernet  HWaddr 00:0C:29:2F:AD:F5  
          inet addr:192.168.220.143  Bcast:192.168.220.255  Mask:255.255.255.0
          inet6 addr: fe80::20c:29ff:fe2f:adf5/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:164689 errors:0 dropped:0 overruns:0 frame:0
          TX packets:65149 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:246264808 <span style=color:#f92672>(</span>234.8 MiB<span style=color:#f92672>)</span>  TX bytes:3547672 <span style=color:#f92672>(</span>3.3 MiB<span style=color:#f92672>)</span>

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:8 errors:0 dropped:0 overruns:0 frame:0
          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:480 <span style=color:#f92672>(</span>480.0 b<span style=color:#f92672>)</span>  TX bytes:480 <span style=color:#f92672>(</span>480.0 b<span style=color:#f92672>)</span>
</code></pre></div><p>The inet addr is the IP you&rsquo;re looking for, in this case <code>192.168.220.143</code>.</p><p>On your host machine, open a terminal and ssh into the guest machine:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>awolski$ ssh user@192.168.220.143
The authenticity of host <span style=color:#e6db74>&#39;192.168.220.143 (192.168.220.143)&#39;</span> can<span style=color:#e6db74>&#39;t be established.
</span><span style=color:#e6db74>RSA key fingerprint is 19:c1:19:f5:7f:e9:4b:38:74:26:ab:3f:24:f7:48:be.
</span><span style=color:#e6db74>Are you sure you want to continue connecting (yes/no)? yes
</span><span style=color:#e6db74>Warning: Permanently added &#39;</span>192.168.220.143<span style=color:#e6db74>&#39; (RSA) to the list of known hosts.
</span><span style=color:#e6db74>user@192.168.220.143&#39;</span>s password: 
<span style=color:#f92672>[</span>user@localhost ~<span style=color:#f92672>]</span>$ pwd
/home/user
</code></pre></div><p>That&rsquo;s it. My VMWare VM is ready to be packaged as a Vagrant Base box.</p><footer>&#171; <a href=https://awolski.com/stormpath-java-sdk-behind-a-proxy-using-shiro-jndiobjectfactory/>Previous</a>
||
<a href=https://awolski.com/aws-access-control-policies-and-iam-best-practices/>Next</a> &#187;</footer></article><div id=comments><strong>Your thoughts?</strong> I'd love to hear them. Please get in <a href=/contact>contact</a>.</div></div></body></html>
<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://awolski.com/style.css><title>Running Liquibase against an existing database, part 2 | Tony Wolski</title><meta name=description content="Tony Wolski: It turns out integrating liquibase into an existing project/database is a lot easier than I originally thought&mldr;
Initially, I thought changelogsync need …"><meta name=author content="Tony Wolski"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=referrer content="no-referrer"><link rel=canonical href=https://awolski.com/running-liquibase-against-an-existing-database-part-2/></head><body><header id=masthead><h1><a href=/ title="Tony Wolski">Tony Wolski</a></h1><nav><ul><li><a href=/contact title=Contact>Contact</a></li></ul></nav></header><main><article class=post><header><h1>Running Liquibase against an existing database, part 2</h1><small>2014-07-23</small></header><p>It turns out integrating liquibase into an existing project/database is a lot easier than I originally thought&mldr;</p><p>Initially, I thought <a href=http://www.liquibase.org/documentation/ant/changelogsync_ant_task.html>changelogsync</a> need to be executed against your database first, in order for the Liquibase tables to be created and have your database marked as in a &lsquo;from now on we&rsquo;re on Liquibase&rsquo; state. And when I looked back over the <a href=http://www.liquibase.org/documentation/existing_project.html>existing project documentation</a>, I thought they had messed up the section &lsquo;We are going to use Liquibase starting&mldr; NOW!':</p><blockquote><p>Instead of building up a changeLog to match your existing database, you can instead just declare “from now on we are using Liquibase”. The advantage to this is that it much easier to set up because it is just a mandate. Usually this works best going from one version to the next because your databases are all in a reasonably consistent state and you simply start tracking database changes in your next version using Liquibase. Because Liquibase only looks at the DatabaseChangeLog table to determine what needs to run, it doesn’t care what else might be in your database and so it will leave all your existing tables alone and just run the new changeSets.</p></blockquote><p>I thought &ldquo;Hang on guys&mldr; You&rsquo;re missing a reference to to the changelogsync task&mldr; It&rsquo;ll fall over if you haven&rsquo;t run that first.&rdquo;</p><p>To verify my initial assumptions I deleted the <code>databasechangelog</code> and <code>databasechangeloglock</code> tables from a sandbox environment I&rsquo;m using at work, and just started up my server (which uses the LiquibaseServletListener). To my surprise, Liquibase creates the tables on it&rsquo;s first run if they&rsquo;re not there&mldr; which makes sense really.</p><p>So there you go, no excuses for not automating your schema updates. One less step (unless you understood correctly from the get go).</p><footer>&#171; <a href=https://awolski.com/deep-work/>Previous</a>
||
<a href=https://awolski.com/specifying-the-location-of-shiro-ini/>Next</a> &#187;</footer><hr><p><strong>Your thoughts?</strong> I'd love to hear them. Please get in <a href=/contact>contact</a>.</p></article></main><footer></footer></body></html>
---
layout: post
title:  "DRY CI"
permalink: /dry-ci
---


The problem: All of our services have the same build process. Test. Build Jar. Build image(s). Publish images. Yet we duplicate the Jenkinsfile for each service. Making changes to the Jenkinsfile, or any of the common CI / DevOps utilities is thus laborious. We're now writing scripts to do commits and create pull requests across 6-7 repositories. This is time consuming for the person making the change and the people that have to approve pull requests (developers). The lag between making the change is oftentimes large as developers don't get around to reviewing those PRs. And often developers aren't (or shouldn't be) concerned with the build changes we're implementing in these Jenkinsfiles.

The cost: When DOL, IMP, Shared Services and Titan are all on the same build process (outlined above), making a change to the build files and other DevOps utilities that apply across all services/applications is going to be painful and time consuming. IMP (6 services), DOL (5-6 services), Titan (? services) and Shared Services (5-6 services). That's up to 20 commits, PRs and merges across repositories when 

Solution: 

a) Move Jenkinsfile to a central repo (devops) and add a git module to each service repository.
b) Move to a monorepo. This option isn't really viable at this point because we don't have the tooling in place to do path relative builds (only building paths that have changed).

